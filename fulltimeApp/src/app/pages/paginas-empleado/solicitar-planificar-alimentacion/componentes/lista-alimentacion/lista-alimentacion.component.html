<ng-container *ngIf="loading; then showSkeletor else showList"></ng-container>

<ng-template #showSkeletor>
  <ion-list>
    <ion-list-header>
      <ion-label>
        <ion-skeleton-text animated style="width: 20%"></ion-skeleton-text>
      </ion-label>
    </ion-list-header>
    <ion-item *ngFor="let s of skeleton">
      <ion-label>
        <h3>
          <ion-skeleton-text animated [style]="{width: s.h3 }"></ion-skeleton-text>
        </h3>
        <p>
          <ion-skeleton-text animated [style]="{width: s.p1 }"></ion-skeleton-text>
        </p>
        <p>
          <ion-skeleton-text animated [style]="{width: s.p2 }"></ion-skeleton-text>
        </p>
      </ion-label>
    </ion-item>
  </ion-list>
</ng-template>
<ng-template #showList>
  <app-refresh-info (onRefresh)="ngOnInit()" removeItem="noClean"></app-refresh-info>

  <ion-button expand="full" shape="round" style="margin: 10px 10px" color="primary"
    (click)="presentModalNuevoRegistro( )">
    <ion-icon slot="start" name="add-circle-outline"></ion-icon>
    Nueva Alimentaci√≥n
  </ion-button>

  <ion-list-header>
    <ion-label style="text-align: center;">
      <h2>Tus solicitudes</h2>
    </ion-label>
  </ion-list-header>

  <ion-card *ngFor="let a of alimentacion | paginate: { itemsPerPage: 5, currentPage: pageActual }" mode="md"
    style="margin-top: 5%; border: solid 1px rgb(123, 124, 125);" [color]="colorfondocard(a)">
    <ion-item>
      <div class="etiqueta" slot="start">
        <p style="font-size: 62%; margin-top: -4%;">
          <strong> Solicitud {{ a.id }} </strong>
        </p>
        <ion-icon class="icono" name="restaurant-outline"></ion-icon><br>
        <ion-text class="icono_texto">
          <p class="servicio">
            <strong> {{ a.nservicio | titlecase }} </strong>
          </p>
          <p *ngIf="a.aprobada === null" class="pendiente">
            Pendiente
          </p>
          <p *ngIf="a.aprobada === true" class="autorizada">
            Autorizada
          </p>
          <p *ngIf="a.aprobada === false" class="negado">
            Negada
          </p>
        </ion-text>
      </div>

      <div class="info">
        <p>
          <strong>Solicitado para: </strong> <br> {{ a.fec_comida_ }} <br>
          <strong>Precio: </strong> {{ a.nvalor |currency }}<br>
          <strong>Horario:</strong><br>
          Desde: {{ a.hora_inicio_ }} <br>
          Hasta: {{ a.hora_fin_ }} <br>
        </p>
      </div>

      <div slot="end" style="text-align: center; font-size: 20px;">
        <!-- Ver registro -->
        <ion-icon name="eye-outline" (click)="presentModalVerRegistro( a )"></ion-icon><br>
        <!-- Editar registro -->
        <ion-icon *ngIf="a.aprobada === null" name="create-outline" (click)="presentModalEditarRegistro( a )"
          style="margin-bottom:15%;"></ion-icon><br>
        <!-- Eliminar registro -->
        <btn-delete *ngIf="a.aprobada === null" (onDelete)="ngOnInit()" [isButtom]="false" nameTable="solicita_comidas"
          [idreg]="a.id" [userCodigo]="a.codigo">
        </btn-delete>
      </div>
    </ion-item>

    <ion-label style="font-size: 11px; margin: 2%; float:right">
      <strong> Solicitud realizada &nbsp; {{ a.fecha_ }} </strong>
    </ion-label>
  </ion-card>

  <!--Configuracion del Pagination - ngxPaginationModulo-->
  <ion-item style="font-size: 70%; margin: 1% 0% 1% 0%;" [hidden]="ver">
    <pagination-controls
      class="paginacion" 
      (pageChange)="pageActual = $event" 
      [maxSize] = maxSize
      [directionLinks] = directionLinks
      [responsive] = responsive 
      [autoHide]="autoHide"
      [previousLabel]="labels.previousLabel"
      [nextLabel]="labels.nextLabel"
      [screenReaderPaginationLabel]="labels.screenReaderPaginationLabel"
      [screenReaderPageLabel]="labels.screenReaderPageLabel"
      [screenReaderCurrentLabel]="labels.screenReaderCurrentLabel">
  </pagination-controls>
  </ion-item>

</ng-template>